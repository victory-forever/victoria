!function(e){var o={type:"html",content:"",url:"",ajax:{},ajax_request:null,closeOnEsc:!0,closeOnOverlayClick:!0,clone:!1,overlay:{block:void 0,tpl:'<div class="arcticmodal-overlay"></div>',css:{backgroundColor:"#000",opacity:.6}},container:{block:void 0,tpl:'<div class="arcticmodal-container"><table class="arcticmodal-container_i"><tr><td class="arcticmodal-container_i2"></td></tr></table></div>'},wrap:void 0,body:void 0,errors:{tpl:'<div class="arcticmodal-error arcticmodal-close"></div>',autoclose_delay:2e3,ajax_unsuccessful_load:"Error"},openEffect:{type:"fade",speed:400},closeEffect:{type:"fade",speed:400},beforeOpen:e.noop,afterOpen:e.noop,beforeClose:e.noop,afterClose:e.noop,afterLoading:e.noop,afterLoadingOnShow:e.noop,errorLoading:e.noop},a=0,r=e([]),t={isEventOut:function(o,a){var r=!0;return e(o).each(function(){e(a.target).get(0)==e(this).get(0)&&(r=!1),0==e(a.target).closest("HTML",e(this).get(0)).length&&(r=!1)}),r}},c={getParentEl:function(o){var a=e(o);return a.data("arcticmodal")?a:(a=e(o).closest(".arcticmodal-container").data("arcticmodalParentEl"),!!a&&a)},transition:function(o,a,r,t){switch(t=void 0==t?e.noop:t,r.type){case"fade":"show"==a?o.fadeIn(r.speed,t):o.fadeOut(r.speed,t);break;case"none":"show"==a?o.show():o.hide(),t()}},prepare_body:function(o,a){e(".arcticmodal-close",o.body).unbind("click.arcticmodal").bind("click.arcticmodal",function(){return a.arcticmodal("close"),!1})},init_el:function(o,i){var l=o.data("arcticmodal");if(!l){if(l=i,a++,l.modalID=a,l.overlay.block=e(l.overlay.tpl),l.overlay.block.css(l.overlay.css),l.container.block=e(l.container.tpl),l.body=e(".arcticmodal-container_i2",l.container.block),i.clone?l.body.html(o.clone(!0)):(o.before('<div id="arcticmodalReserve'+l.modalID+'" style="display: none" />'),l.body.html(o)),c.prepare_body(l,o),l.closeOnOverlayClick&&l.overlay.block.add(l.container.block).click(function(a){t.isEventOut(e(">*",l.body),a)&&o.arcticmodal("close")}),l.container.block.data("arcticmodalParentEl",o),o.data("arcticmodal",l),r=e.merge(r,o),e.proxy(n.show,o)(),"html"==l.type)return o;if(void 0!=l.ajax.beforeSend){var d=l.ajax.beforeSend;delete l.ajax.beforeSend}if(void 0!=l.ajax.success){var s=l.ajax.success;delete l.ajax.success}if(void 0!=l.ajax.error){var f=l.ajax.error;delete l.ajax.error}var u=e.extend(!0,{url:l.url,beforeSend:function(){void 0==d?l.body.html('<div class="arcticmodal-loading" />'):d(l,o)},success:function(e){o.trigger("afterLoading"),l.afterLoading(l,o,e),void 0==s?l.body.html(e):s(l,o,e),c.prepare_body(l,o),o.trigger("afterLoadingOnShow"),l.afterLoadingOnShow(l,o,e)},error:function(){o.trigger("errorLoading"),l.errorLoading(l,o),void 0==f?(l.body.html(l.errors.tpl),e(".arcticmodal-error",l.body).html(l.errors.ajax_unsuccessful_load),e(".arcticmodal-close",l.body).click(function(){return o.arcticmodal("close"),!1}),l.errors.autoclose_delay&&setTimeout(function(){o.arcticmodal("close")},l.errors.autoclose_delay)):f(l,o)}},l.ajax);l.ajax_request=e.ajax(u),o.data("arcticmodal",l)}},init:function(a){if(a=e.extend(!0,{},o,a),!e.isFunction(this))return this.each(function(){c.init_el(e(this),e.extend(!0,{},a))});if(void 0==a)return void e.error("jquery.arcticmodal: Uncorrect parameters");if(""==a.type)return void e.error('jquery.arcticmodal: Don\'t set parameter "type"');switch(a.type){case"html":if(""==a.content)return void e.error('jquery.arcticmodal: Don\'t set parameter "content"');var r=a.content;return a.content="",c.init_el(e(r),a);case"ajax":return""==a.url?void e.error('jquery.arcticmodal: Don\'t set parameter "url"'):c.init_el(e("<div />"),a)}}},n={show:function(){var o=c.getParentEl(this);if(o===!1)return void e.error("jquery.arcticmodal: Uncorrect call");var a=o.data("arcticmodal");if(a.overlay.block.hide(),a.container.block.hide(),e("BODY").append(a.overlay.block),e("BODY").append(a.container.block),a.beforeOpen(a,o),o.trigger("beforeOpen"),"hidden"!=a.wrap.css("overflow")){a.wrap.data("arcticmodalOverflow",a.wrap.css("overflow"));var t=a.wrap.outerWidth(!0);a.wrap.css("overflow","hidden");var n=a.wrap.outerWidth(!0);n!=t&&a.wrap.css("marginRight",n-t+"px")}return r.not(o).each(function(){var o=e(this).data("arcticmodal");o.overlay.block.hide()}),c.transition(a.overlay.block,"show",r.length>1?{type:"none"}:a.openEffect),c.transition(a.container.block,"show",r.length>1?{type:"none"}:a.openEffect,function(){a.afterOpen(a,o),o.trigger("afterOpen")}),o},close:function(){return e.isFunction(this)?void r.each(function(){e(this).arcticmodal("close")}):this.each(function(){var o=c.getParentEl(this);if(o===!1)return void e.error("jquery.arcticmodal: Uncorrect call");var a=o.data("arcticmodal");a.beforeClose(a,o)!==!1&&(o.trigger("beforeClose"),r.not(o).last().each(function(){var o=e(this).data("arcticmodal");o.overlay.block.show()}),c.transition(a.overlay.block,"hide",r.length>1?{type:"none"}:a.closeEffect),c.transition(a.container.block,"hide",r.length>1?{type:"none"}:a.closeEffect,function(){a.afterClose(a,o),o.trigger("afterClose"),a.clone||e("#arcticmodalReserve"+a.modalID).replaceWith(a.body.find(">*")),a.overlay.block.remove(),a.container.block.remove(),o.data("arcticmodal",null),e(".arcticmodal-container").length||(a.wrap.data("arcticmodalOverflow")&&a.wrap.css("overflow",a.wrap.data("arcticmodalOverflow")),a.wrap.css("marginRight",0))}),"ajax"==a.type&&a.ajax_request.abort(),r=r.not(o))})},setDefault:function(a){e.extend(!0,o,a)}};e(function(){o.wrap=e(document.all&&!document.querySelector?"html":"body")}),e(document).bind("keyup.arcticmodal",function(e){var o=r.last();if(o.length){var a=o.data("arcticmodal");a.closeOnEsc&&27===e.keyCode&&o.arcticmodal("close")}}),e.arcticmodal=e.fn.arcticmodal=function(o){return n[o]?n[o].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof o&&o?void e.error("jquery.arcticmodal: Method "+o+" does not exist"):c.init.apply(this,arguments)}}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5hcmN0aWNtb2RhbC5qcyJdLCJuYW1lcyI6WyIkIiwiZGVmYXVsdF9vcHRpb25zIiwidHlwZSIsImNvbnRlbnQiLCJ1cmwiLCJhamF4IiwiYWpheF9yZXF1ZXN0IiwiY2xvc2VPbkVzYyIsImNsb3NlT25PdmVybGF5Q2xpY2siLCJjbG9uZSIsIm92ZXJsYXkiLCJibG9jayIsInVuZGVmaW5lZCIsInRwbCIsImNzcyIsImJhY2tncm91bmRDb2xvciIsIm9wYWNpdHkiLCJjb250YWluZXIiLCJ3cmFwIiwiYm9keSIsImVycm9ycyIsImF1dG9jbG9zZV9kZWxheSIsImFqYXhfdW5zdWNjZXNzZnVsX2xvYWQiLCJvcGVuRWZmZWN0Iiwic3BlZWQiLCJjbG9zZUVmZmVjdCIsImJlZm9yZU9wZW4iLCJub29wIiwiYWZ0ZXJPcGVuIiwiYmVmb3JlQ2xvc2UiLCJhZnRlckNsb3NlIiwiYWZ0ZXJMb2FkaW5nIiwiYWZ0ZXJMb2FkaW5nT25TaG93IiwiZXJyb3JMb2FkaW5nIiwibW9kYWxJRCIsIm1vZGFscyIsInV0aWxzIiwiaXNFdmVudE91dCIsImJsb2NrcyIsImUiLCJyIiwiZWFjaCIsInRhcmdldCIsImdldCIsInRoaXMiLCJjbG9zZXN0IiwibGVuZ3RoIiwibW9kYWwiLCJnZXRQYXJlbnRFbCIsImVsIiwiZGF0YSIsInRyYW5zaXRpb24iLCJhY3Rpb24iLCJvcHRpb25zIiwiY2FsbGJhY2siLCJmYWRlSW4iLCJmYWRlT3V0Iiwic2hvdyIsImhpZGUiLCJwcmVwYXJlX2JvZHkiLCJEIiwiJHRoaXMiLCJ1bmJpbmQiLCJiaW5kIiwiYXJjdGljbW9kYWwiLCJpbml0X2VsIiwiaHRtbCIsImJlZm9yZSIsImFkZCIsImNsaWNrIiwibWVyZ2UiLCJwcm94eSIsImFjdGlvbnMiLCJiZWZvcmVTZW5kIiwiZm5fYmVmb3JlU2VuZCIsInN1Y2Nlc3MiLCJmbl9zdWNjZXNzIiwiZXJyb3IiLCJmbl9lcnJvciIsIm8iLCJleHRlbmQiLCJyZXNwb25jZSIsInRyaWdnZXIiLCJzZXRUaW1lb3V0IiwiaW5pdCIsImlzRnVuY3Rpb24iLCJjIiwiYXBwZW5kIiwidzEiLCJvdXRlcldpZHRoIiwidzIiLCJub3QiLCJkIiwiY2xvc2UiLCJsYXN0IiwicmVwbGFjZVdpdGgiLCJmaW5kIiwicmVtb3ZlIiwiYWJvcnQiLCJzZXREZWZhdWx0IiwiZG9jdW1lbnQiLCJhbGwiLCJxdWVyeVNlbGVjdG9yIiwibSIsImtleUNvZGUiLCJmbiIsIm1ldGhvZCIsImFwcGx5IiwiQXJyYXkiLCJwcm90b3R5cGUiLCJzbGljZSIsImNhbGwiLCJhcmd1bWVudHMiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiJDQVVBLFNBQVVBLEdBR1QsR0FBSUMsSUFFSEMsS0FBTSxPQUNOQyxRQUFTLEdBQ1RDLElBQUssR0FDTEMsUUFDQUMsYUFBYyxLQUVkQyxZQUFZLEVBQ1pDLHFCQUFxQixFQUVyQkMsT0FBTyxFQUVQQyxTQUNDQyxNQUFPQyxPQUNQQyxJQUFLLDBDQUNMQyxLQUNDQyxnQkFBaUIsT0FDakJDLFFBQVMsS0FJWEMsV0FDQ04sTUFBT0MsT0FDUEMsSUFBSywrSUFHTkssS0FBTU4sT0FDTk8sS0FBTVAsT0FFTlEsUUFDQ1AsSUFBSywwREFDTFEsZ0JBQWlCLElBQ2pCQyx1QkFBd0IsU0FHekJDLFlBQ0NyQixLQUFNLE9BQ05zQixNQUFPLEtBRVJDLGFBQ0N2QixLQUFNLE9BQ05zQixNQUFPLEtBR1JFLFdBQVkxQixFQUFFMkIsS0FDZEMsVUFBVzVCLEVBQUUyQixLQUNiRSxZQUFhN0IsRUFBRTJCLEtBQ2ZHLFdBQVk5QixFQUFFMkIsS0FDZEksYUFBYy9CLEVBQUUyQixLQUNoQkssbUJBQW9CaEMsRUFBRTJCLEtBQ3RCTSxhQUFjakMsRUFBRTJCLE1BS2JPLEVBQVUsRUFDVkMsRUFBU25DLE1BR1RvQyxHQUlIQyxXQUFZLFNBQVNDLEVBQVFDLEdBQzVCLEdBQUlDLElBQUksQ0FLUixPQUpBeEMsR0FBRXNDLEdBQVFHLEtBQUssV0FDVnpDLEVBQUV1QyxFQUFFRyxRQUFRQyxJQUFJLElBQUkzQyxF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bEJwQyxFQUFNWCxLQUFLLGNBQWUsTUFDckJsRCxFQUFFLDBCQUEwQjhDLFNBQzVCYyxFQUFFMUMsS0FBS2dDLEtBQUssd0JBQ2ZVLEVBQUUxQyxLQUFLSixJQUFJLFdBQVk4QyxFQUFFMUMsS0FBS2dDLEtBQUssd0JBQ3BDVSxFQUFFMUMsS0FBS0osSUFBSSxjQUFlLE1BS2hCLFFBQVI4QyxFQUFFMUQsTUFDTDBELEVBQUV0RCxhQUFhNEYsUUFFaEIvRCxFQUFTQSxFQUFPd0QsSUFBSTlCLE9BT3ZCc0MsV0FBWSxTQUFTOUMsR0FDcEJyRCxFQUFFZ0YsUUFBTyxFQUFNL0UsRUFBaUJvRCxJQU9sQ3JELEdBQUUsV0FDREMsRUFBZ0JpQixLQUFPbEIsRUFBR29HLFNBQVNDLE1BQVFELFNBQVNFLGNBQWlCLE9BQVMsVUFLL0V0RyxFQUFFb0csVUFBVXJDLEtBQUssb0JBQXFCLFNBQVN4QixHQUM5QyxHQUFJZ0UsR0FBSXBFLEVBQU8yRCxNQUNmLElBQUtTLEVBQUV6RCxPQUFQLENBQ0EsR0FBSWMsR0FBSTJDLEVBQUVyRCxLQUFLLGNBQ1hVLEdBQUVyRCxZQUEyQixLQUFaZ0MsRUFBRWlFLFNBQ3RCRCxFQUFFdkMsWUFBWSxZQUloQmhFLEVBQUVnRSxZQUFjaEUsRUFBRXlHLEdBQUd6QyxZQUFjLFNBQVMwQyxHQUUzQyxNQUFJbEMsR0FBUWtDLEdBQ0psQyxFQUFRa0MsR0FBUUMsTUFBTS9ELEtBQU1nRSxNQUFNQyxVQUFVQyxNQUFNQyxLQUFLQyxVQUFXLElBQy9DLGdCQUFUTixJQUFzQkEsTUFHdkMxRyxHQUFFNkUsTUFBTSw4QkFBZ0M2QixFQUFTLG1CQUYxQzNELEVBQU1xQyxLQUFLdUIsTUFBTS9ELEtBQU1vRSxhQVE5QkMiLCJmaWxlIjoianF1ZXJ5LmFyY3RpY21vZGFsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuXHJcbiBhcmN0aWNNb2RhbCDigJQgalF1ZXJ5IHBsdWdpblxyXG4gVmVyc2lvbjogMC4zXHJcbiBBdXRob3I6IFNlcmdleSBQcmVkdm9kaXRlbGV2IChzZXJnZXkucHJlZHZvZGl0ZWxldkBnbWFpbC5jb20pXHJcbiBDb21wYW55OiBBcmN0aWMgTGFib3JhdG9yeSAoaHR0cDovL2FyY3RpY2xhYi5ydS8pXHJcblxyXG4gRG9jcyAmIEV4YW1wbGVzOiBodHRwOi8vYXJjdGljbGFiLnJ1L2FyY3RpY21vZGFsL1xyXG5cclxuICovXHJcbihmdW5jdGlvbigkKSB7XHJcblxyXG5cclxuXHR2YXIgZGVmYXVsdF9vcHRpb25zID0ge1xyXG5cclxuXHRcdHR5cGU6ICdodG1sJywgLy8gYWpheCDQuNC70LggaHRtbFxyXG5cdFx0Y29udGVudDogJycsXHJcblx0XHR1cmw6ICcnLFxyXG5cdFx0YWpheDoge30sXHJcblx0XHRhamF4X3JlcXVlc3Q6IG51bGwsXHJcblxyXG5cdFx0Y2xvc2VPbkVzYzogdHJ1ZSxcclxuXHRcdGNsb3NlT25PdmVybGF5Q2xpY2s6IHRydWUsXHJcblxyXG5cdFx0Y2xvbmU6IGZhbHNlLFxyXG5cclxuXHRcdG92ZXJsYXk6IHtcclxuXHRcdFx0YmxvY2s6IHVuZGVmaW5lZCxcclxuXHRcdFx0dHBsOiAnPGRpdiBjbGFzcz1cImFyY3RpY21vZGFsLW92ZXJsYXlcIj48L2Rpdj4nLFxyXG5cdFx0XHRjc3M6IHtcclxuXHRcdFx0XHRiYWNrZ3JvdW5kQ29sb3I6ICcjMDAwJyxcclxuXHRcdFx0XHRvcGFjaXR5OiAuNlxyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdGNvbnRhaW5lcjoge1xyXG5cdFx0XHRibG9jazogdW5kZWZpbmVkLFxyXG5cdFx0XHR0cGw6ICc8ZGl2IGNsYXNzPVwiYXJjdGljbW9kYWwtY29udGFpbmVyXCI+PHRhYmxlIGNsYXNzPVwiYXJjdGljbW9kYWwtY29udGFpbmVyX2lcIj48dHI+PHRkIGNsYXNzPVwiYXJjdGljbW9kYWwtY29udGFpbmVyX2kyXCI+PC90ZD48L3RyPjwvdGFibGU+PC9kaXY+J1xyXG5cdFx0fSxcclxuXHJcblx0XHR3cmFwOiB1bmRlZmluZWQsXHJcblx0XHRib2R5OiB1bmRlZmluZWQsXHJcblxyXG5cdFx0ZXJyb3JzOiB7XHJcblx0XHRcdHRwbDogJzxkaXYgY2xhc3M9XCJhcmN0aWNtb2RhbC1lcnJvciBhcmN0aWNtb2RhbC1jbG9zZVwiPjwvZGl2PicsXHJcblx0XHRcdGF1dG9jbG9zZV9kZWxheTogMjAwMCxcclxuXHRcdFx0YWpheF91bnN1Y2Nlc3NmdWxfbG9hZDogJ0Vycm9yJ1xyXG5cdFx0fSxcclxuXHJcblx0XHRvcGVuRWZmZWN0OiB7XHJcblx0XHRcdHR5cGU6ICdmYWRlJyxcclxuXHRcdFx0c3BlZWQ6IDQwMFxyXG5cdFx0fSxcclxuXHRcdGNsb3NlRWZmZWN0OiB7XHJcblx0XHRcdHR5cGU6ICdmYWRlJyxcclxuXHRcdFx0c3BlZWQ6IDQwMFxyXG5cdFx0fSxcclxuXHJcblx0XHRiZWZvcmVPcGVuOiAkLm5vb3AsXHJcblx0XHRhZnRlck9wZW46ICQubm9vcCxcclxuXHRcdGJlZm9yZUNsb3NlOiAkLm5vb3AsXHJcblx0XHRhZnRlckNsb3NlOiAkLm5vb3AsXHJcblx0XHRhZnRlckxvYWRpbmc6ICQubm9vcCxcclxuXHRcdGFmdGVyTG9hZGluZ09uU2hvdzogJC5ub29wLFxyXG5cdFx0ZXJyb3JMb2FkaW5nOiAkLm5vb3BcclxuXHJcblx0fTtcclxuXHJcblxyXG5cdHZhciBtb2RhbElEID0gMDtcclxuXHR2YXIgbW9kYWxzID0gJChbXSk7XHJcblxyXG5cclxuXHR2YXIgdXRpbHMgPSB7XHJcblxyXG5cclxuXHRcdC8vINCe0L/RgNC10LTQtdC70Y/QtdGCINC/0YDQvtC40LfQvtGI0LvQviDQu9C4INGB0L7QsdGL0YLQuNC1IGUg0LLQvdC1INCx0LvQvtC60LAgYmxvY2tcclxuXHRcdGlzRXZlbnRPdXQ6IGZ1bmN0aW9uKGJsb2NrcywgZSkge1xyXG5cdFx0XHR2YXIgciA9IHRydWU7XHJcblx0XHRcdCQoYmxvY2tzKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGlmICgkKGUudGFyZ2V0KS5nZXQoMCk9PSQodGhpcykuZ2V0KDApKSByID0gZmFsc2U7XHJcblx0XHRcdFx0aWYgKCQoZS50YXJnZXQpLmNsb3Nlc3QoJ0hUTUwnLCAkKHRoaXMpLmdldCgwKSkubGVuZ3RoPT0wKSByID0gZmFsc2U7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRyZXR1cm4gcjtcclxuXHRcdH1cclxuXHJcblxyXG5cdH07XHJcblxyXG5cclxuXHR2YXIgbW9kYWwgPSB7XHJcblxyXG5cclxuXHRcdC8vINCS0L7Qt9Cy0YDQsNGJ0LDQtdGCINGN0LvQtdC80LXQvdGCLCDQutC+0YLQvtGA0YvQvCDQsdGL0Lsg0LLRi9C30LLQsNC9INC/0LvQsNCz0LjQvVxyXG5cdFx0Z2V0UGFyZW50RWw6IGZ1bmN0aW9uKGVsKSB7XHJcblx0XHRcdHZhciByID0gJChlbCk7XHJcblx0XHRcdGlmIChyLmRhdGEoJ2FyY3RpY21vZGFsJykpIHJldHVybiByO1xyXG5cdFx0XHRyID0gJChlbCkuY2xvc2VzdCgnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmRhdGEoJ2FyY3RpY21vZGFsUGFyZW50RWwnKTtcclxuXHRcdFx0aWYgKHIpIHJldHVybiByO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9LFxyXG5cclxuXHJcblx0XHQvLyDQn9C10YDQtdGF0L7QtFxyXG5cdFx0dHJhbnNpdGlvbjogZnVuY3Rpb24oZWwsIGFjdGlvbiwgb3B0aW9ucywgY2FsbGJhY2spIHtcclxuXHRcdFx0Y2FsbGJhY2sgPSBjYWxsYmFjaz09dW5kZWZpbmVkID8gJC5ub29wIDogY2FsbGJhY2s7XHJcblx0XHRcdHN3aXRjaCAob3B0aW9ucy50eXBlKSB7XHJcblx0XHRcdFx0Y2FzZSAnZmFkZSc6XHJcblx0XHRcdFx0XHRhY3Rpb249PSdzaG93JyA/IGVsLmZhZGVJbihvcHRpb25zLnNwZWVkLCBjYWxsYmFjaykgOiBlbC5mYWRlT3V0KG9wdGlvbnMuc3BlZWQsIGNhbGxiYWNrKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgJ25vbmUnOlxyXG5cdFx0XHRcdFx0YWN0aW9uPT0nc2hvdycgPyBlbC5zaG93KCkgOiBlbC5oaWRlKCk7XHJcblx0XHRcdFx0XHRjYWxsYmFjaygpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cclxuXHRcdC8vINCf0L7QtNCz0L7RgtCy0LrQsCDRgdC+0LTQtdGA0LbQuNC80L7Qs9C+INC+0LrQvdCwXHJcblx0XHRwcmVwYXJlX2JvZHk6IGZ1bmN0aW9uKEQsICR0aGlzKSB7XHJcblxyXG5cdFx0XHQvLyDQntCx0YDQsNCx0L7RgtGH0LjQuiDQt9Cw0LrRgNGL0YLQuNGPXHJcblx0XHRcdCQoJy5hcmN0aWNtb2RhbC1jbG9zZScsIEQuYm9keSkudW5iaW5kKCdjbGljay5hcmN0aWNtb2RhbCcpLmJpbmQoJ2NsaWNrLmFyY3RpY21vZGFsJywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JHRoaXMuYXJjdGljbW9kYWwoJ2Nsb3NlJyk7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHR9LFxyXG5cclxuXHJcblx0XHQvLyDQmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjyDRjdC70LXQvNC10L3RgtCwXHJcblx0XHRpbml0X2VsOiBmdW5jdGlvbigkdGhpcywgb3B0aW9ucykge1xyXG5cdFx0XHR2YXIgRCA9ICR0aGlzLmRhdGEoJ2FyY3RpY21vZGFsJyk7XHJcblx0XHRcdGlmIChEKSByZXR1cm47XHJcblxyXG5cdFx0XHREID0gb3B0aW9ucztcclxuXHRcdFx0bW9kYWxJRCsrO1xyXG5cdFx0XHRELm1vZGFsSUQgPSBtb2RhbElEO1xyXG5cclxuXHRcdFx0Ly8gT3ZlcmxheVxyXG5cdFx0XHRELm92ZXJsYXkuYmxvY2sgPSAkKEQub3ZlcmxheS50cGwpO1xyXG5cdFx0XHRELm92ZXJsYXkuYmxvY2suY3NzKEQub3ZlcmxheS5jc3MpO1xyXG5cclxuXHRcdFx0Ly8gQ29udGFpbmVyXHJcblx0XHRcdEQuY29udGFpbmVyLmJsb2NrID0gJChELmNvbnRhaW5lci50cGwpO1xyXG5cclxuXHRcdFx0Ly8gQk9EWVxyXG5cdFx0XHRELmJvZHkgPSAkKCcuYXJjdGljbW9kYWwtY29udGFpbmVyX2kyJywgRC5jb250YWluZXIuYmxvY2spO1xyXG5cdFx0XHRpZiAob3B0aW9ucy5jbG9uZSkge1xyXG5cdFx0XHRcdEQuYm9keS5odG1sKCR0aGlzLmNsb25lKHRydWUpKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkdGhpcy5iZWZvcmUoJzxkaXYgaWQ9XCJhcmN0aWNtb2RhbFJlc2VydmUnICsgRC5tb2RhbElEICsgJ1wiIHN0eWxlPVwiZGlzcGxheTogbm9uZVwiIC8+Jyk7XHJcblx0XHRcdFx0RC5ib2R5Lmh0bWwoJHRoaXMpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyDQn9C+0LTQs9C+0YLQvtCy0LrQsCDRgdC+0LTQtdGA0LbQuNC80L7Qs9C+XHJcblx0XHRcdG1vZGFsLnByZXBhcmVfYm9keShELCAkdGhpcyk7XHJcblxyXG5cdFx0XHQvLyDQl9Cw0LrRgNGL0YLQuNC1INC/0YDQuCDQutC70LjQutC1INC90LAgb3ZlcmxheVxyXG5cdFx0XHRpZiAoRC5jbG9zZU9uT3ZlcmxheUNsaWNrKVxyXG5cdFx0XHRcdEQub3ZlcmxheS5ibG9jay5hZGQoRC5jb250YWluZXIuYmxvY2spLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuXHRcdFx0XHRcdGlmICh1dGlscy5pc0V2ZW50T3V0KCQoJz4qJywgRC5ib2R5KSwgZSkpXHJcblx0XHRcdFx0XHRcdCR0aGlzLmFyY3RpY21vZGFsKCdjbG9zZScpO1xyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly8g0JfQsNC/0L7QvNC90LjQvCDQvdCw0YHRgtGA0L7QudC60LhcclxuXHRcdFx0RC5jb250YWluZXIuYmxvY2suZGF0YSgnYXJjdGljbW9kYWxQYXJlbnRFbCcsICR0aGlzKTtcclxuXHRcdFx0JHRoaXMuZGF0YSgnYXJjdGljbW9kYWwnLCBEKTtcclxuXHRcdFx0bW9kYWxzID0gJC5tZXJnZShtb2RhbHMsICR0aGlzKTtcclxuXHJcblx0XHRcdC8vINCf0L7QutCw0LfQsNGC0YxcclxuXHRcdFx0JC5wcm94eShhY3Rpb25zLnNob3csICR0aGlzKSgpO1xyXG5cdFx0XHRpZiAoRC50eXBlPT0naHRtbCcpIHJldHVybiAkdGhpcztcclxuXHJcblx0XHRcdC8vIEFqYXgt0LfQsNCz0YDRg9C30LrQsFxyXG5cdFx0XHRpZiAoRC5hamF4LmJlZm9yZVNlbmQhPXVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdHZhciBmbl9iZWZvcmVTZW5kID0gRC5hamF4LmJlZm9yZVNlbmQ7XHJcblx0XHRcdFx0ZGVsZXRlIEQuYWpheC5iZWZvcmVTZW5kO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmIChELmFqYXguc3VjY2VzcyE9dW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0dmFyIGZuX3N1Y2Nlc3MgPSBELmFqYXguc3VjY2VzcztcclxuXHRcdFx0XHRkZWxldGUgRC5hamF4LnN1Y2Nlc3M7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKEQuYWpheC5lcnJvciE9dW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0dmFyIGZuX2Vycm9yID0gRC5hamF4LmVycm9yO1xyXG5cdFx0XHRcdGRlbGV0ZSBELmFqYXguZXJyb3I7XHJcblx0XHRcdH1cclxuXHRcdFx0dmFyIG8gPSAkLmV4dGVuZCh0cnVlLCB7XHJcblx0XHRcdFx0dXJsOiBELnVybCxcclxuXHRcdFx0XHRiZWZvcmVTZW5kOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdGlmIChmbl9iZWZvcmVTZW5kPT11bmRlZmluZWQpIHtcclxuXHRcdFx0XHRcdFx0RC5ib2R5Lmh0bWwoJzxkaXYgY2xhc3M9XCJhcmN0aWNtb2RhbC1sb2FkaW5nXCIgLz4nKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGZuX2JlZm9yZVNlbmQoRCwgJHRoaXMpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24ocmVzcG9uY2UpIHtcclxuXHJcblx0XHRcdFx0XHQvLyDQodC+0LHRi9GC0LjQtSDQv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60Lgg0LTQviDQv9C+0LrQsNC30LAg0YHQvtC00LXRgNC20LjQvNC+0LPQvlxyXG5cdFx0XHRcdFx0JHRoaXMudHJpZ2dlcignYWZ0ZXJMb2FkaW5nJyk7XHJcblx0XHRcdFx0XHRELmFmdGVyTG9hZGluZyhELCAkdGhpcywgcmVzcG9uY2UpO1xyXG5cclxuXHRcdFx0XHRcdGlmIChmbl9zdWNjZXNzPT11bmRlZmluZWQpIHtcclxuXHRcdFx0XHRcdFx0RC5ib2R5Lmh0bWwocmVzcG9uY2UpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0Zm5fc3VjY2VzcyhELCAkdGhpcywgcmVzcG9uY2UpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0bW9kYWwucHJlcGFyZV9ib2R5KEQsICR0aGlzKTtcclxuXHJcblx0XHRcdFx0XHQvLyDQodC+0LHRi9GC0LjQtSDQv9C+0YHQu9C1INC30LDQs9GA0YPQt9C60Lgg0L/QvtGB0LvQtSDQvtGC0L7QsdGA0LDQttC10L3QuNGPINGB0L7QtNC10YDQttC40LzQvtCz0L5cclxuXHRcdFx0XHRcdCR0aGlzLnRyaWdnZXIoJ2FmdGVyTG9hZGluZ09uU2hvdycpO1xyXG5cdFx0XHRcdFx0RC5hZnRlckxvYWRpbmdPblNob3coRCwgJHRoaXMsIHJlc3BvbmNlKTtcclxuXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRlcnJvcjogZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHRcdFx0Ly8g0KHQvtCx0YvRgtC40LUg0L/RgNC4INC+0YjQuNCx0LrQtSDQt9Cw0LPRgNGD0LfQutC4XHJcblx0XHRcdFx0XHQkdGhpcy50cmlnZ2VyKCdlcnJvckxvYWRpbmcnKTtcclxuXHRcdFx0XHRcdEQuZXJyb3JMb2FkaW5nKEQsICR0aGlzKTtcclxuXHJcblx0XHRcdFx0XHRpZiAoZm5fZXJyb3I9PXVuZGVmaW5lZCkge1xyXG5cdFx0XHRcdFx0XHRELmJvZHkuaHRtbChELmVycm9ycy50cGwpO1xyXG5cdFx0XHRcdFx0XHQkKCcuYXJjdGljbW9kYWwtZXJyb3InLCBELmJvZHkpLmh0bWwoRC5lcnJvcnMuYWpheF91bnN1Y2Nlc3NmdWxfbG9hZCk7XHJcblx0XHRcdFx0XHRcdCQoJy5hcmN0aWNtb2RhbC1jbG9zZScsIEQuYm9keSkuY2xpY2soZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdFx0JHRoaXMuYXJjdGljbW9kYWwoJ2Nsb3NlJyk7XHJcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0aWYgKEQuZXJyb3JzLmF1dG9jbG9zZV9kZWxheSlcclxuXHRcdFx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0JHRoaXMuYXJjdGljbW9kYWwoJ2Nsb3NlJyk7XHJcblx0XHRcdFx0XHRcdFx0fSwgRC5lcnJvcnMuYXV0b2Nsb3NlX2RlbGF5KTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGZuX2Vycm9yKEQsICR0aGlzKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIEQuYWpheCk7XHJcblx0XHRcdEQuYWpheF9yZXF1ZXN0ID0gJC5hamF4KG8pO1xyXG5cclxuXHRcdFx0Ly8g0JfQsNC/0L7QvNC90LjRgtGMINC90LDRgdGC0YDQvtC50LrQuFxyXG5cdFx0XHQkdGhpcy5kYXRhKCdhcmN0aWNtb2RhbCcsIEQpO1xyXG5cclxuXHRcdH0sXHJcblxyXG5cclxuXHRcdC8vINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPXHJcblx0XHRpbml0OiBmdW5jdGlvbihvcHRpb25zKSB7XHJcblx0XHRcdG9wdGlvbnMgPSAkLmV4dGVuZCh0cnVlLCB7fSwgZGVmYXVsdF9vcHRpb25zLCBvcHRpb25zKTtcclxuXHRcdFx0aWYgKCQuaXNGdW5jdGlvbih0aGlzKSkge1xyXG5cdFx0XHRcdGlmIChvcHRpb25zPT11bmRlZmluZWQpIHtcclxuXHRcdFx0XHRcdCQuZXJyb3IoJ2pxdWVyeS5hcmN0aWNtb2RhbDogVW5jb3JyZWN0IHBhcmFtZXRlcnMnKTtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKG9wdGlvbnMudHlwZT09JycpIHtcclxuXHRcdFx0XHRcdCQuZXJyb3IoJ2pxdWVyeS5hcmN0aWNtb2RhbDogRG9uXFwndCBzZXQgcGFyYW1ldGVyIFwidHlwZVwiJyk7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHN3aXRjaCAob3B0aW9ucy50eXBlKSB7XHJcblx0XHRcdFx0XHRjYXNlICdodG1sJzpcclxuXHRcdFx0XHRcdFx0aWYgKG9wdGlvbnMuY29udGVudD09JycpIHtcclxuXHRcdFx0XHRcdFx0XHQkLmVycm9yKCdqcXVlcnkuYXJjdGljbW9kYWw6IERvblxcJ3Qgc2V0IHBhcmFtZXRlciBcImNvbnRlbnRcIicpO1xyXG5cdFx0XHRcdFx0XHRcdHJldHVyblxyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdHZhciBjID0gb3B0aW9ucy5jb250ZW50O1xyXG5cdFx0XHRcdFx0XHRvcHRpb25zLmNvbnRlbnQgPSAnJztcclxuXHJcblx0XHRcdFx0XHRcdHJldHVybiBtb2RhbC5pbml0X2VsKCQoYyksIG9wdGlvbnMpO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgJ2FqYXgnOlxyXG5cdFx0XHRcdFx0XHRpZiAob3B0aW9ucy51cmw9PScnKSB7XHJcblx0XHRcdFx0XHRcdFx0JC5lcnJvcignanF1ZXJ5LmFyY3RpY21vZGFsOiBEb25cXCd0IHNldCBwYXJhbWV0ZXIgXCJ1cmxcIicpO1xyXG5cdFx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRyZXR1cm4gbW9kYWwuaW5pdF9lbCgkKCc8ZGl2IC8+JyksIG9wdGlvbnMpO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdG1vZGFsLmluaXRfZWwoJCh0aGlzKSwgJC5leHRlbmQodHJ1ZSwge30sIG9wdGlvbnMpKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHJcblx0fTtcclxuXHJcblxyXG5cdHZhciBhY3Rpb25zID0ge1xyXG5cclxuXHJcblx0XHQvLyDQn9C+0LrQsNC30LDRgtGMXHJcblx0XHRzaG93OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyICR0aGlzID0gbW9kYWwuZ2V0UGFyZW50RWwodGhpcyk7XHJcblx0XHRcdGlmICgkdGhpcz09PWZhbHNlKSB7XHJcblx0XHRcdFx0JC5lcnJvcignanF1ZXJ5LmFyY3RpY21vZGFsOiBVbmNvcnJlY3QgY2FsbCcpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHR2YXIgRCA9ICR0aGlzLmRhdGEoJ2FyY3RpY21vZGFsJyk7XHJcblxyXG5cdFx0XHQvLyDQlNC+0LHQsNCy0LjRgtGMIG92ZXJsYXkg0LggY29udGFpbmVyXHJcblx0XHRcdEQub3ZlcmxheS5ibG9jay5oaWRlKCk7XHJcblx0XHRcdEQuY29udGFpbmVyLmJsb2NrLmhpZGUoKTtcclxuXHRcdFx0JCgnQk9EWScpLmFwcGVuZChELm92ZXJsYXkuYmxvY2spO1xyXG5cdFx0XHQkKCdCT0RZJykuYXBwZW5kKEQuY29udGFpbmVyLmJsb2NrKTtcclxuXHJcblx0XHRcdC8vINCh0L7QsdGL0YLQuNC1XHJcblx0XHRcdEQuYmVmb3JlT3BlbihELCAkdGhpcyk7XHJcblx0XHRcdCR0aGlzLnRyaWdnZXIoJ2JlZm9yZU9wZW4nKTtcclxuXHJcblx0XHRcdC8vIFdyYXBcclxuXHRcdFx0aWYgKEQud3JhcC5jc3MoJ292ZXJmbG93JykhPSdoaWRkZW4nKSB7XHJcblx0XHRcdFx0RC53cmFwLmRhdGEoJ2FyY3RpY21vZGFsT3ZlcmZsb3cnLCBELndyYXAuY3NzKCdvdmVyZmxvdycpKTtcclxuXHRcdFx0XHR2YXIgdzEgPSBELndyYXAub3V0ZXJXaWR0aCh0cnVlKTtcclxuXHRcdFx0XHRELndyYXAuY3NzKCdvdmVyZmxvdycsICdoaWRkZW4nKTtcclxuXHRcdFx0XHR2YXIgdzIgPSBELndyYXAub3V0ZXJXaWR0aCh0cnVlKTtcclxuXHRcdFx0XHRpZiAodzIhPXcxKVxyXG5cdFx0XHRcdFx0RC53cmFwLmNzcygnbWFyZ2luUmlnaHQnLCAodzIgLSB3MSkgKyAncHgnKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8g0KHQutGA0YvRgtGMINC/0YDQtdC00YvQtNGD0YnQuNC1INC+0LLQtdGA0LvQtdC4XHJcblx0XHRcdG1vZGFscy5ub3QoJHRoaXMpLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIGQgPSAkKHRoaXMpLmRhdGEoJ2FyY3RpY21vZGFsJyk7XHJcblx0XHRcdFx0ZC5vdmVybGF5LmJsb2NrLmhpZGUoKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyDQn9C+0LrQsNC30LDRgtGMXHJcblx0XHRcdG1vZGFsLnRyYW5zaXRpb24oRC5vdmVybGF5LmJsb2NrLCAnc2hvdycsIG1vZGFscy5sZW5ndGg+MSA/IHt0eXBlOiAnbm9uZSd9IDogRC5vcGVuRWZmZWN0KTtcclxuXHRcdFx0bW9kYWwudHJhbnNpdGlvbihELmNvbnRhaW5lci5ibG9jaywgJ3Nob3cnLCBtb2RhbHMubGVuZ3RoPjEgPyB7dHlwZTogJ25vbmUnfSA6IEQub3BlbkVmZmVjdCwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0RC5hZnRlck9wZW4oRCwgJHRoaXMpO1xyXG5cdFx0XHRcdCR0aGlzLnRyaWdnZXIoJ2FmdGVyT3BlbicpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHJldHVybiAkdGhpcztcclxuXHRcdH0sXHJcblxyXG5cclxuXHRcdC8vINCX0LDQutGA0YvRgtGMXHJcblx0XHRjbG9zZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICgkLmlzRnVuY3Rpb24odGhpcykpIHtcclxuXHRcdFx0XHRtb2RhbHMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdCQodGhpcykuYXJjdGljbW9kYWwoJ2Nsb3NlJyk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHZhciAkdGhpcyA9IG1vZGFsLmdldFBhcmVudEVsKHRoaXMpO1xyXG5cdFx0XHRcdFx0aWYgKCR0aGlzPT09ZmFsc2UpIHtcclxuXHRcdFx0XHRcdFx0JC5lcnJvcignanF1ZXJ5LmFyY3RpY21vZGFsOiBVbmNvcnJlY3QgY2FsbCcpO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR2YXIgRCA9ICR0aGlzLmRhdGEoJ2FyY3RpY21vZGFsJyk7XHJcblxyXG5cdFx0XHRcdFx0Ly8g0KHQvtCx0YvRgtC40LUg0L/QtdGA0LXQtCDQt9Cw0LrRgNGL0YLQuNC10LxcclxuXHRcdFx0XHRcdGlmIChELmJlZm9yZUNsb3NlKEQsICR0aGlzKT09PWZhbHNlKSByZXR1cm47XHJcblx0XHRcdFx0XHQkdGhpcy50cmlnZ2VyKCdiZWZvcmVDbG9zZScpO1xyXG5cclxuXHRcdFx0XHRcdC8vINCf0L7QutCw0LfQsNGC0Ywg0L/RgNC10LTRi9C00YPRidC40LUg0L7QstC10YDQu9C10LhcclxuXHRcdFx0XHRcdG1vZGFscy5ub3QoJHRoaXMpLmxhc3QoKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHR2YXIgZCA9ICQodGhpcykuZGF0YSgnYXJjdGljbW9kYWwnKTtcclxuXHRcdFx0XHRcdFx0ZC5vdmVybGF5LmJsb2NrLnNob3coKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHRcdG1vZGFsLnRyYW5zaXRpb24oRC5vdmVybGF5LmJsb2NrLCAnaGlkZScsIG1vZGFscy5sZW5ndGg+MSA/IHt0eXBlOiAnbm9uZSd9IDogRC5jbG9zZUVmZmVjdCk7XHJcblx0XHRcdFx0XHRtb2RhbC50cmFuc2l0aW9uKEQuY29udGFpbmVyLmJsb2NrLCAnaGlkZScsIG1vZGFscy5sZW5ndGg+MSA/IHt0eXBlOiAnbm9uZSd9IDogRC5jbG9zZUVmZmVjdCwgZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHRcdFx0XHQvLyDQodC+0LHRi9GC0LjQtSDQv9C+0YHQu9C1INC30LDQutGA0YvRgtC40Y9cclxuXHRcdFx0XHRcdFx0RC5hZnRlckNsb3NlKEQsICR0aGlzKTtcclxuXHRcdFx0XHRcdFx0JHRoaXMudHJpZ2dlcignYWZ0ZXJDbG9zZScpO1xyXG5cclxuXHRcdFx0XHRcdFx0Ly8g0JXRgdC70Lgg0L3QtSDQutC70L7QvdC40YDQvtCy0LDQu9C4IC0g0LLQtdGA0L3RkdC8INC90LAg0LzQtdGB0YLQvlxyXG5cdFx0XHRcdFx0XHRpZiAoIUQuY2xvbmUpXHJcblx0XHRcdFx0XHRcdFx0JCgnI2FyY3RpY21vZGFsUmVzZXJ2ZScgKyBELm1vZGFsSUQpLnJlcGxhY2VXaXRoKEQuYm9keS5maW5kKCc+KicpKTtcclxuXHJcblx0XHRcdFx0XHRcdEQub3ZlcmxheS5ibG9jay5yZW1vdmUoKTtcclxuXHRcdFx0XHRcdFx0RC5jb250YWluZXIuYmxvY2sucmVtb3ZlKCk7XHJcblx0XHRcdFx0XHRcdCR0aGlzLmRhdGEoJ2FyY3RpY21vZGFsJywgbnVsbCk7XHJcblx0XHRcdFx0XHRcdGlmICghJCgnLmFyY3RpY21vZGFsLWNvbnRhaW5lcicpLmxlbmd0aCkge1xyXG5cdFx0XHRcdFx0XHRcdGlmIChELndyYXAuZGF0YSgnYXJjdGljbW9kYWxPdmVyZmxvdycpKVxyXG5cdFx0XHRcdFx0XHRcdFx0RC53cmFwLmNzcygnb3ZlcmZsb3cnLCBELndyYXAuZGF0YSgnYXJjdGljbW9kYWxPdmVyZmxvdycpKTtcclxuXHRcdFx0XHRcdFx0XHRELndyYXAuY3NzKCdtYXJnaW5SaWdodCcsIDApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKEQudHlwZT09J2FqYXgnKVxyXG5cdFx0XHRcdFx0XHRELmFqYXhfcmVxdWVzdC5hYm9ydCgpO1xyXG5cclxuXHRcdFx0XHRcdG1vZGFscyA9IG1vZGFscy5ub3QoJHRoaXMpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHJcblx0XHQvLyDQo9GB0YLQsNC90L7QstC40YLRjCDQvtC/0YbQuNC4INC/0L4t0YPQvNC+0LvRh9Cw0L3QuNGOXHJcblx0XHRzZXREZWZhdWx0OiBmdW5jdGlvbihvcHRpb25zKSB7XHJcblx0XHRcdCQuZXh0ZW5kKHRydWUsIGRlZmF1bHRfb3B0aW9ucywgb3B0aW9ucyk7XHJcblx0XHR9XHJcblxyXG5cclxuXHR9O1xyXG5cclxuXHJcblx0JChmdW5jdGlvbigpIHtcclxuXHRcdGRlZmF1bHRfb3B0aW9ucy53cmFwID0gJCgoZG9jdW1lbnQuYWxsICYmICFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKSA/ICdodG1sJyA6ICdib2R5Jyk7XHJcblx0fSk7XHJcblxyXG5cclxuXHQvLyDQl9Cw0LrRgNGL0YLQuNC1INC/0YDQuCDQvdCw0LbQsNGC0LjQuCBFc2NhcGVcclxuXHQkKGRvY3VtZW50KS5iaW5kKCdrZXl1cC5hcmN0aWNtb2RhbCcsIGZ1bmN0aW9uKGUpIHtcclxuXHRcdHZhciBtID0gbW9kYWxzLmxhc3QoKTtcclxuXHRcdGlmICghbS5sZW5ndGgpIHJldHVybjtcclxuXHRcdHZhciBEID0gbS5kYXRhKCdhcmN0aWNtb2RhbCcpO1xyXG5cdFx0aWYgKEQuY2xvc2VPbkVzYyAmJiAoZS5rZXlDb2RlPT09MjcpKVxyXG5cdFx0XHRtLmFyY3RpY21vZGFsKCdjbG9zZScpO1xyXG5cdH0pO1xyXG5cclxuXHJcblx0JC5hcmN0aWNtb2RhbCA9ICQuZm4uYXJjdGljbW9kYWwgPSBmdW5jdGlvbihtZXRob2QpIHtcclxuXHJcblx0XHRpZiAoYWN0aW9uc1ttZXRob2RdKSB7XHJcblx0XHRcdHJldHVybiBhY3Rpb25zW21ldGhvZF0uYXBwbHkodGhpcywgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XHJcblx0XHR9IGVsc2UgaWYgKHR5cGVvZiBtZXRob2Q9PT0nb2JqZWN0JyB8fCAhbWV0aG9kKSB7XHJcblx0XHRcdHJldHVybiBtb2RhbC5pbml0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQkLmVycm9yKCdqcXVlcnkuYXJjdGljbW9kYWw6IE1ldGhvZCAnICsgbWV0aG9kICsgJyBkb2VzIG5vdCBleGlzdCcpO1xyXG5cdFx0fVxyXG5cclxuXHR9O1xyXG5cclxuXHJcbn0pKGpRdWVyeSk7Il19
